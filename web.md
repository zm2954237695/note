##### 什么是Cookie？什么是Session?

cookie是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。通常，它用来告知服务端两个请求是否来自同一浏览器,如保持用户的登录状态。Cookie使基于无状态的HTTP协议记录稳定的状态信息成为了可能。

Cookie主要用于以下三个方面：

- 会话状态管理(如用户登录状态、购物车等)
- 个性化设置(如用户自定义设置、主题等)
- 浏览器行为跟踪(如分析用户行为等)

##### 什么是session

session代表着服务器和客户端一次会话的过程。session对象存储特定用户会话所需的属性及配置信息。这样，当用户在应用程序的Web页之间跳转时，存储在Session对象的变量将不会丢失，而是在整个用户会话中一直存在。当客户端关闭会话，或者session超时失效时会话结束。

##### Cookie和Session有什么区别？

- 作用范围不同，Cookie保存在客户端(浏览器)，session保存在服务端。
- 存取方式不同，Cookie只能保存ASCII,Session可以存任意数据类型，一般情况在session保存一些常用变量信息，如UserId等
- 有效期不同，cookie可设置长时间保持，如我们经常使用的默认登录功能，session一般失效时间较短，客户端关闭或session超时都会失效。
- 隐私策略不同，cookie存在客户端，安全性较差，session存储在服务端，安全性较cookie更好。
- 存储大小不同，单个cookie保存的数据不能超过4k，session可存储数据远高于cookie。

##### 为什么需要Cookie和Session，他们有什么关联？

浏览器一般是Http协议的，而http是无状态的。浏览器不能记录是否是同个用户发送请求给服务端。这时就需要一个机制来告诉服务端，本次操作的用户是否登录，是哪个用户进行执行操作，这就需要cookie和session的配合。

用户第一次请求服务器的时候，服务端根据用户提交的信息，创建对应的session，请求返回时将此session的唯一标识信息sessionID返回给浏览器，浏览器接收到服务器返回的sessionID信息后，会将此信息存入cookie中，同时cookie记录此session属于哪个域名。

当用户第二次访问服务器时，请求会判断此域名是否存在cookie信息，如果存在自动将cookie信息发送给服务端，服务端从cookie中获取sessionID，再根据sessionID查找对应的session信息，如果没有找到说明用户没有登录或登录失效，如果找到session证明用户已经登录可以进行后续操作。



##### 浏览器输入网址到返回页面的过程

1. 在客户端浏览器中输入网址URL
2. 发送到DNS获得域名对应的WEB服务器的IP地址。
3. 客户端浏览器与WEB服务器建立TCP连接。
4. 客户端浏览器向对应IP地址的WEB服务器发送相应的HTTP或HTTPS请求。
5. 服务器响应请求，返回指定的URL数据或错误信息；如果设定重定向，则重定向到新的URL。
6. 客户端浏览器下载数据，解析HTML源文件，解析的过程中实现对页面的排版，解析完成后，在浏览器中显示基础的页面。
7. 分析页面中的超链接，显示在当前页面，重复以上过程直至没有超链接需要发送，完成页面的全部显示。

##### 浏览器查找域名的IP地址

1. 浏览器查找浏览器缓存，如果有域名对应的IP地址则返回，如果没有继续查找。
2. 查看本地硬盘的 hosts 文件，看看其中有没有和这个域名对应的规则，如果有的话就直接使用 hosts 文件里面的 ip 地址。
3.  如果在本地的 hosts 文件没有能够找到对应的 ip 地址，浏览器会发出一个 DNS请求到本地DNS服务器 。本地DNS服务器一般都是你的网络接入服务器商提供，比如中国电信，中国移动。
4. DNS请求到达本地DNS服务器之后，本地DNS服务器会首先查询它的缓存记录，如果缓存中有此条记录，就可以直接返回结果，此过程是递归的方式进行查询。如果没有，本地DNS服务器还要向DNS根服务器进行查询。
5. 根DNS服务器没有记录具体的域名和IP地址的对应关系，而是告诉本地DNS服务器，你可以到域服务器上去继续查询，并给出域服务器的地址。这种过程是迭代的过程。
6. 本地DNS服务器继续向域服务器发出请求，比如，请求的对象是.com域服务器。.com域服务器收到请求之后，也不会直接返回域名和IP地址的对应关系，而是告诉本地DNS服务器，你的域名的解析服务器的地址。
7. 最后，本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址对应关系，本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问。

