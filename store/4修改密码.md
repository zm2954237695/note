### 修改密码

需要用户提交原始密码和新密码，再根据当前登录的用户进行信息的修改操作。

###### 1.修改密码-持久层

1.1规划需要执行的sql语句

根据用户的uid修改用户password的值

```mysql
update t_user set password =?,modified_user=?,modified_time=?

where uid= ?
```

根据uid查询用户的数据。在修改密码之前，首先要保证当前这用户的数据存在，检测是否被标记为已经删除、检测输入的原始密码是否正确。

```mysql
select *from t_user where uid = ?
```

#### 2修改密码-业务层

###### 2.1规划异常

1.用户的原密码错误，is_delete==1,uid找不到  归结于用户没有发现的异常。

2、update在更新的时候，有可能产生未知的异常。

###### 2.2设计接口和抽象方法

执行用户修改密码的核心方法.

2.3控制层

2.4前端页面

### 个人资料

#### 1.个人资料-持久层

##### 1.1	规划需要的SQL语句

1根据用户信息的sql语句

```mysql
update t_user set phone=?,email=?,gender=?,

modified_user=?,modified_time=? where uid=?
```

2.根据uid查询用户数据

```mysql
select * from t_user where uid=?
```

#### 2个人资料业务层

#### 3个人资料控制层&前端页面

##### 3.1处理异常

暂无

##### 3.2设计请求

1.设置一打开页面就发送当前用户数据的查询.

```http
/users/get_by_uid
GET
HttpSession session
 JsonResult<User>
```

2.点击修改按钮发送用户的数据修改操作请求的设计。

```http
/users/change_info
POST
User user,HttpSession session
JsonResult<Void>
```

